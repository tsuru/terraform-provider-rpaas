---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "rpaas_block Resource - terraform-provider-rpaas"
subcategory: ""
description: |-
  
---

# rpaas_block (Resource)



## Example Usage

```terraform
resource "rpaas_block" "example_http" {
  service_name = "rpaasv2-be"
  instance     = "my-rpaas"

  name    = "http" # One of [root, http, server, lua-server, lua-worker]
  content = <<-EOF
    upstream my_upstream {
      root         /usr/share/nginx/html;
      include      mime.types;
      default_type application/json;

      server_tokens      off;
      more_clear_headers Server;
    }
  EOF
}

resource "rpaas_block" "example_server" {
  service_name = "rpaasv2-be"
  instance     = "my-rpaas"

  name    = "server"
  content = <<-EOF
    default_type text/html;
    more_set_headers 'X-Frame-Options: deny';

    location / {
      if ($scheme = 'http') {
        return 301 https://${http_host}${request_uri};
      }

      proxy_set_header Connection        '';
      proxy_set_header Host              my-service.cluster.svc.cluster.local:8080;
      proxy_set_header X-Forwarded-For   ${proxy_add_x_forwarded_for};
      proxy_set_header X-Forwarded-Host  ${host};
      proxy_set_header X-Forwarded-Proto ${scheme};
      proxy_set_header X-Real-IP         ${remote_addr};
      proxy_set_header X-Request-Id      ${request_id_final};
      proxy_set_header Early-Data        ${ssl_early_data};

      proxy_pass     http://my_upstream/;
      proxy_redirect ~^http://my-service.cluster.svc.cluster.local:8080/(.*)$ /$2;
    }
  EOF
}

resource "rpaas_block" "example_lua" {
  service_name = "rpaasv2-be"
  instance     = "my-rpaas"

  name    = "lua-server"
  content = file("script.lua")
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `content` (String) Custom Nginx configuration
- `instance` (String) RPaaS Instance Name
- `name` (String) Name of the block that will receive the custom configuration content. Allowed values: [root http server lua-server lua-worker]
- `service_name` (String) RPaaS Service Name

### Read-Only

- `id` (String) The ID of this resource.

## Import

Import is supported using the following syntax:

```shell
terraform import rpaas_block.resource_name "service::instance::name"

# example
terraform import rpaas_block.myblock "rpaasv2-be::my-rpaas::http"
```
